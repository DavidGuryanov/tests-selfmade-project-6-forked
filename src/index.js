import path from'path';import{launchBrowser,compareLayout,runTests,mkdir,mkfile,structure,stylelint,w3c,orderStyles,lang,titleEmmet,horizontalScroll}from'lib-verstka-tests';import ru from'./locales/ru.js';import{colorScheme,switchScheme,blockFullScreen,semanticTags,resetMargins}from'./tests.js';const[,,PROJECT_PATH,LANG='ru']=process.argv,app=async(a,b)=>{await runTests({projectPath:a,lang:b,resource:ru},async()=>{const c=mkdir('project',[mkfile('index.html'),mkdir('scripts',[mkfile('script.js')]),mkdir('styles',[mkfile('dark.css'),mkfile('globals.css'),mkfile('light.css'),mkfile('style.css'),mkfile('variables.css')]),mkdir('fonts',[mkfile('fonts.css')])]),d=structure(a,c);if(d.length)return d;const e=path.join(a,'index.html'),{browser:f,page:g}=await launchBrowser(e,{viewport:{width:1024,height:768}}),h=(await Promise.all([w3c(a,'index.html'),stylelint(a),orderStyles(g,['globals.css','fonts.css']),lang(g,b),titleEmmet(g),colorScheme(g),switchScheme(e),blockFullScreen(g,'header'),blockFullScreen(g,'footer'),semanticTags(g,['header','main','section','footer','nav']),resetMargins(g,['body']),horizontalScroll(g),compareLayout(e,{canonicalImage:'layout-canonical-1024.jpg',pageImage:'layout-1024.jpg',outputImage:'output-1024.jpg',browserOptions:{viewport:{width:1024,height:768}}}),compareLayout(e,{canonicalImage:'layout-canonical-768.jpg',pageImage:'layout-768.jpg',outputImage:'output-768.jpg',browserOptions:{viewport:{width:768,height:1024}}}),compareLayout(e,{canonicalImage:'layout-canonical-375.jpg',pageImage:'layout-375.jpg',outputImage:'output-375.jpg',browserOptions:{viewport:{width:375,height:668}}})])).filter(Boolean).flat();return await f.close(),h})};app(PROJECT_PATH,LANG);